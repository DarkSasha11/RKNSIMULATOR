<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>РКН | ЦЕНТР УПРАВЛЕНИЯ v10.0</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #010409; 
            --panel: #0d1117;
            --accent: #38bdf8; 
            --danger: #f43f5e;
            --warning: #fbbf24; 
            --success: #10b981;
            --step: 180px; /* Ширина карточки 160px + 20px отступы */
        }

        * { box-sizing: border-box; }

        body {
            margin: 0; padding: 0; 
            background: var(--bg); 
            color: #e6edf3;
            font-family: 'Segoe UI', sans-serif; 
            height: 100vh; 
            width: 100vw;
            display: grid; 
            grid-template-columns: 320px 1fr 340px;
            overflow: hidden; /* Важно: страница не скроллится! */
        }

        /* Боковые панели логов и чата */
        .side { 
            height: 100vh; 
            background: var(--panel); 
            border: 1px solid #30363d; 
            display: flex; 
            flex-direction: column; 
            padding: 25px; 
            position: relative;
        }
        
        .title { 
            font-family: 'Orbitron'; 
            font-size: 0.8rem; 
            color: var(--accent); 
            border-bottom: 2px solid var(--accent); 
            padding-bottom: 12px; 
            margin-bottom: 20px; 
            letter-spacing: 2px; 
            text-transform: uppercase; 
            text-align: center;
        }
        
        #history, #chat { 
            flex: 1; 
            overflow-y: auto; 
            padding-right: 5px;
            font-family: 'JetBrains Mono', monospace; 
            font-size: 0.85rem;
        }

        /* Стили элементов */
        .h-item { 
            padding: 12px; 
            margin-bottom: 12px; 
            border-radius: 10px; 
            background: #161b22; 
            border-left: 5px solid; 
            animation: fadeIn 0.3s ease;
        }
        
        .comm { 
            background: rgba(255,255,255,0.04); 
            padding: 14px; 
            border-radius: 15px; 
            margin-bottom: 12px; 
            border-left: 3px solid var(--accent);
            animation: slideIn 0.3s ease;
        }

        .user { color: var(--accent); font-weight: bold; font-size: 0.75rem; display: block; margin-bottom: 5px; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* Центральная часть */
        main { 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            background: radial-gradient(circle at center, #1e1b4b 0%, #010409 100%);
            position: relative;
        }

        .logo { 
            width: 110px; 
            filter: drop-shadow(0 0 25px var(--accent)); 
            margin-bottom: 25px; 
            transition: 0.5s;
        }

        /* Рулетка */
        .viewport {
            position: relative; 
            width: 720px; 
            height: 220px; 
            background: #0d1117; 
            border: 4px solid #30363d;
            border-radius: 30px; 
            overflow: hidden; 
            display: flex; 
            align-items: center; 
            box-shadow: inset 0 0 60px #000;
        }

        .track { 
            display: flex; 
            align-items: center; 
            position: absolute; 
            left: 0; 
            will-change: transform;
        }

        .item {
            width: 160px; 
            height: 170px; 
            margin: 0 10px;
            background: #161b22; 
            border: 1px solid #30363d; 
            border-radius: 20px;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            flex-shrink: 0;
            transition: 0.3s;
        }
        
        .item img { width: 80px; height: 80px; border-radius: 18px; margin-bottom: 12px; }
        .item span { font-size: 0.9rem; font-weight: 900; color: #fff; text-transform: uppercase; letter-spacing: 1px; }

        .pointer {
            position: absolute; 
            left: 50%; 
            top: 0; 
            bottom: 0; 
            width: 5px;
            background: var(--danger); 
            transform: translateX(-50%); 
            z-index: 100;
            box-shadow: 0 0 25px var(--danger); 
            pointer-events: none;
        }

        .btn-spin {
            margin-top: 50px; 
            padding: 25px 80px; 
            background: var(--accent);
            border: none; 
            border-radius: 20px; 
            font-family: 'Orbitron';
            font-weight: 900; 
            cursor: pointer; 
            transition: 0.3s; 
            color: #000;
            font-size: 1.3rem; 
            box-shadow: 0 0 40px rgba(56, 189, 248, 0.4);
        }

        .btn-spin:hover:not(:disabled) { transform: scale(1.05); background: #fff; box-shadow: 0 0 50px rgba(255, 255, 255, 0.6); }
        .btn-spin:disabled { opacity: 0.2; cursor: wait; transform: scale(0.95); }

        /* Модальное окно вердикта */
        .overlay { 
            position: fixed; inset: 0; 
            background: rgba(0,0,0,0.97); 
            display: none; 
            align-items: center; 
            justify-content: center; 
            z-index: 9999; 
            backdrop-filter: blur(20px); 
        }
        
        .modal { 
            background: #0d1117; 
            padding: 50px; 
            border-radius: 50px; 
            border: 3px solid var(--accent); 
            text-align: center; 
            width: 420px;
            box-shadow: 0 0 100px rgba(56, 189, 248, 0.3);
        }
        
        .modal img { 
            width: 140px; height: 140px; 
            border-radius: 30px; 
            margin-bottom: 25px; 
            border: 4px solid var(--accent); 
            padding: 5px;
        }
        
        .v-btns { display: flex; flex-direction: column; gap: 15px; margin-top: 30px; }
        
        .v-btn { 
            padding: 20px; 
            border: none; 
            border-radius: 15px; 
            font-weight: 900; 
            cursor: pointer; 
            text-transform: uppercase; 
            font-size: 1.1rem;
            transition: 0.2s;
        }
        
        .v-ban { background: var(--danger); color: #fff; }
        .v-slow { background: var(--warning); color: #000; }
        .v-safe { background: var(--success); color: #fff; }
        .v-btn:hover { filter: brightness(1.2); transform: translateY(-3px); }
    </style>
</head>
<body>

    <aside class="side">
        <div class="title">СИСТЕМНЫЕ ПРОТОКОЛЫ</div>
        <div id="history"></div>
    </aside>

    <main>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Roskomnadzor_logo.svg/1024px-Roskomnadzor_logo.svg.png" class="logo">
        <h1 style="font-family:'Orbitron'; font-size: 1.6rem; margin:0; letter-spacing: 5px; text-shadow: 0 0 15px var(--accent);">RKN TERMINAL 10.0</h1>
        
        <div class="viewport">
            <div class="pointer"></div>
            <div id="track" class="track"></div>
        </div>
        
        <button class="btn-spin" id="spinBtn">ЗАПУСТИТЬ ПРОВЕРКУ</button>
    </main>

    <aside class="side">
        <div class="title">ОБЩЕСТВЕННЫЙ МОНИТОРИНГ</div>
        <div id="chat"></div>
    </aside>

    <div class="overlay" id="overlay">
        <div class="modal">
            <img id="mImg">
            <h2 id="mTitle" style="font-family:'Orbitron'; margin:0; font-size: 2.2rem; color: #fff;"></h2>
            <div class="v-btns">
                <button class="v-btn v-ban" onclick="v('ЗАБЛОКИРОВАН')">ЗАБЛОКИРОВАТЬ</button>
                <button class="v-btn v-slow" onclick="v('ЗАМЕДЛЕН')">ЗАМЕДЛИТЬ</button>
                <button class="v-btn v-safe" onclick="v('ПОМИЛОВАН')">ПОМИЛОВАТЬ</button>
            </div>
        </div>
    </div>

    <script>
        // БАЗА ЗВУКОВ (Base64 или стабильные CDN)
        const audio = {
            tick: new Audio('https://www.soundjay.com/buttons/sounds/button-50.mp3'),
            win: new Audio('https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3'),
            ban: new Audio('https://www.soundjay.com/mechanical/sounds/mechanical-clunk-1.mp3'),
            slow: new Audio('https://www.soundjay.com/communication/sounds/digital-beeps-7.mp3'),
            safe: new Audio('https://www.soundjay.com/clock/sounds/desk-bell-one-1.mp3')
        };
        audio.tick.volume = 0.3;

        const apps = [
            { n: 'YouTube', i: 'https://cdn-icons-png.flaticon.com/512/1384/1384060.png' },
            { n: 'Discord', i: 'https://cdn-icons-png.flaticon.com/512/3670/3670157.png' },
            { n: 'Steam', i: 'https://cdn-icons-png.flaticon.com/512/512/512555.png' },
            { n: 'Twitch', i: 'https://cdn-icons-png.flaticon.com/512/5968/5968819.png' },
            { n: 'Telegram', i: 'https://cdn-icons-png.flaticon.com/512/2111/2111646.png' },
            { n: 'TikTok', i: 'https://cdn-icons-png.flaticon.com/512/3046/3046121.png' },
            { n: 'Spotify', i: 'https://cdn-icons-png.flaticon.com/512/174/174868.png' },
            { n: 'Reddit', i: 'https://cdn-icons-png.flaticon.com/512/52/52053.png' },
            { n: 'GitHub', i: 'https://cdn-icons-png.flaticon.com/512/25/25231.png' },
            { n: 'Roblox', i: 'https://cdn-icons-png.flaticon.com/512/10304/10304443.png' }
        ];

        const phrases = {
            'ЗАБЛОКИРОВАН': ['ЗА ЧТО?!', 'VPN: "Мое время пришло"', 'Жесть...', 'Минус инет', 'Пойду на улицу', 'РКН, вы чего?', 'Прощай Стим...', 'Доигрались', 'Ясно, чебурнет', 'Это фиаско', 'Только не это!', 'Ухожу в оффлайн'],
            'ЗАМЕДЛЕН': ['Опять лаги', '144р мой выбор', 'Грузит час!', 'Улитка быстрее', 'Бесит!', 'Ну хоть грузит', 'VPN выручай', 'Зачем это?', 'Слайд-шоу какое-то', 'Терпим, пацаны', 'Интернет из 90-х'],
            'ПОМИЛОВАН': ['УРААА!', 'Живем!', 'РКН лучший!', 'Чудо!', 'Спасибо!', 'Справедливо!', 'Красавцы!', 'Наконец-то!', 'Праздник!', 'Ессс!', 'Хорошие новости!', 'Адекватное решение']
        };

        const track = document.getElementById('track');
        const spinBtn = document.getElementById('spinBtn');
        const step = 180;

        function build() {
            let h = ''; 
            for(let i=0; i<150; i++) { // Генерируем длинную ленту
                apps.forEach(a => {
                    h += `<div class="item"><img src="${a.i}"><span>${a.n}</span></div>`;
                });
            }
            track.innerHTML = h;
            gsap.set(track, { x: -50 * step });
        }

        spinBtn.onclick = () => {
            // Разблокировка звука
            Object.values(audio).forEach(a => { a.play(); a.pause(); });
            
            spinBtn.disabled = true;
            const target = 100 + Math.floor(Math.random() * apps.length);
            
            // ИДЕАЛЬНАЯ ЦЕНТРОВКА: 
            // Половина вьюпорта (360px) - (позиция иконки * 180px) - (половина иконки 90px)
            const x = 360 - (target * step) - (step / 2);

            let lastT = 0;
            gsap.to(track, {
                x: x, 
                duration: 8, 
                ease: "power4.out",
                onUpdate: () => {
                    let curX = gsap.getProperty(track, "x");
                    // Считаем индекс относительно центральной линии (360px)
                    let curT = Math.round(Math.abs((curX - 360 + step/2) / step));
                    if(curT !== lastT) {
                        audio.tick.currentTime = 0; 
                        audio.tick.play().catch(()=>{});
                        lastT = curT;
                    }
                },
                onComplete: () => {
                    audio.win.play();
                    const app = apps[target % apps.length];
                    document.getElementById('mImg').src = app.i;
                    document.getElementById('mTitle').innerText = app.n;
                    document.getElementById('overlay').style.display = 'flex';
                }
            });
        };

        function v(type) {
            // Отработка звуков вердикта
            if(type === 'ЗАБЛОКИРОВАН') { audio.ban.currentTime = 0; audio.ban.play(); }
            if(type === 'ЗАМЕДЛЕН') { audio.slow.currentTime = 0; audio.slow.play(); }
            if(type === 'ПОМИЛОВАН') { audio.safe.currentTime = 0; audio.safe.play(); }

            const name = document.getElementById('mTitle').innerText;
            const hist = document.getElementById('history');
            const chat = document.getElementById('chat');

            // Добавляем в лог
            const color = type === 'ЗАБЛОКИРОВАН' ? 'var(--danger)' : type === 'ЗАМЕДЛЕН' ? 'var(--warning)' : 'var(--success)';
            hist.insertAdjacentHTML('afterbegin', `<div class="h-item" style="border-color:${color}"><b>${name}</b><br><span style="color:${color}">${type}</span></div>`);
            
            // Имитация чата
            for(let i=0; i<6; i++) {
                setTimeout(() => {
                    const pool = phrases[type];
                    const p = pool[Math.floor(Math.random()*pool.length)];
                    chat.insertAdjacentHTML('afterbegin', `<div class="comm"><span class="user">User_${Math.floor(Math.random()*9999)}</span>${p}</div>`);
                    chat.scrollTop = 0;
                }, i * 300);
            }

            document.getElementById('overlay').style.display = 'none';
            // Плавный возврат рулетки
            gsap.to(track, { x: -50 * step, duration: 1.5, ease: "power2.inOut", onComplete: () => spinBtn.disabled = false });
        }

        build();
    </script>
</body>
</html>
